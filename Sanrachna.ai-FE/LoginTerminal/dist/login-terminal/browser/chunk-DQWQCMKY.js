import{a as O}from"./chunk-UQTX5XDL.js";import{b as N,c as l,d as I,e as L,g as V,h as D,i as G,j as U,l as q}from"./chunk-3NQ2KXGN.js";import{A as k,E as x,G as u,H as g,I as S,K as T,L as E,M as r,N as i,O as c,P as _,Q as p,R as m,S as o,T as w,da as P,ga as M,k as y,n as f,p as b,q as h,ta as F,ua as A,w as v,x as s}from"./chunk-WPWVWWUJ.js";var C=class n{THEME_KEY="lt_theme";themeModeSignal=v("dark");themeMode=this.themeModeSignal.asReadonly();constructor(){this.initializeTheme(),P(()=>{this.applyTheme(this.themeModeSignal())})}initializeTheme(){let t=localStorage.getItem(this.THEME_KEY);t?this.themeModeSignal.set(t):this.themeModeSignal.set("dark")}setTheme(t){this.themeModeSignal.set(t),localStorage.setItem(this.THEME_KEY,t)}toggleTheme(){let e=this.themeModeSignal()==="dark"?"light":"dark";this.setTheme(e)}isDarkMode(){let t=this.themeModeSignal();return t==="system"?this.getSystemPreference()==="dark":t==="dark"}getSystemPreference(){return typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"dark"}applyTheme(t){if(typeof document>"u")return;let e=t==="system"?this.getSystemPreference():t,a=document.documentElement;e==="dark"?(a.classList.add("dark"),a.classList.remove("light")):(a.classList.add("light"),a.classList.remove("dark"))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var j=(n,t)=>t.value;function H(n,t){n&1&&o(0," Saving... ")}function K(n,t){n&1&&o(0," Save Changes ")}function R(n,t){if(n&1){let e=_();r(0,"div")(1,"h3",11),o(2,"Update Profile"),i(),r(3,"form",12),p("ngSubmit",function(){b(e);let d=m();return h(d.onProfileSubmit())}),r(4,"div",13)(5,"label",14),o(6," Full Name "),i(),c(7,"input",15),i(),r(8,"div",16)(9,"label",17),o(10," Email Address "),i(),c(11,"input",18),i(),r(12,"button",19),x(13,H,1,0)(14,K,1,0),i()()()}if(n&2){let e=m();s(3),u("formGroup",e.profileForm),s(9),u("disabled",e.profileForm.invalid||e.authService.isLoading()),s(),S(e.authService.isLoading()?13:14)}}function B(n,t){n&1&&o(0," Updating... ")}function J(n,t){n&1&&o(0," Update Password ")}function Q(n,t){if(n&1){let e=_();r(0,"div")(1,"h3",11),o(2,"Change Password"),i(),r(3,"form",12),p("ngSubmit",function(){b(e);let d=m();return h(d.onPasswordSubmit())}),r(4,"div",13)(5,"label",20),o(6," Current Password "),i(),c(7,"input",21),i(),r(8,"div",13)(9,"label",22),o(10," New Password "),i(),c(11,"input",23),i(),r(12,"div",16)(13,"label",24),o(14," Confirm New Password "),i(),c(15,"input",25),i(),r(16,"button",19),x(17,B,1,0)(18,J,1,0),i()()()}if(n&2){let e=m();s(3),u("formGroup",e.passwordForm),s(13),u("disabled",e.passwordForm.invalid||e.authService.isLoading()),s(),S(e.authService.isLoading()?17:18)}}function W(n,t){if(n&1){let e=_();r(0,"label",28)(1,"input",29),p("change",function(){let d=b(e).$implicit,z=m(2);return h(z.onThemeChange(d.value))}),i(),r(2,"span",30),o(3),i(),r(4,"div")(5,"p",31),o(6),i(),r(7,"p",32),o(8),i()()()}if(n&2){let e=t.$implicit,a=m(2);g("border-blue-500",a.themeService.themeMode()===e.value),s(),u("value",e.value)("checked",a.themeService.themeMode()===e.value),s(2),w(e.icon),s(3),w(e.label),s(2),w(e.description)}}function X(n,t){if(n&1&&(r(0,"div")(1,"h3",11),o(2,"Theme Settings"),i(),r(3,"div",26),T(4,W,9,7,"label",27,j),i()()),n&2){let e=m();s(4),E(e.themeOptions)}}var Y=class n{authService=f(F);themeService=f(C);fb=f(U);toastService=f(A);activeTab=v("profile");profileForm;passwordForm;themeOptions=[{value:"dark",label:"Dark",description:"Dark theme for low-light environments",icon:"dark_mode"},{value:"light",label:"Light",description:"Light theme for bright environments",icon:"light_mode"},{value:"system",label:"System",description:"Automatically match your system settings",icon:"settings_suggest"}];ngOnInit(){this.initializeForms()}initializeForms(){let t=this.authService.currentUser();this.profileForm=this.fb.group({name:[t?.name||"",[l.required,l.minLength(2)]],email:[t?.email||"",[l.required,l.email]]}),this.passwordForm=this.fb.group({currentPassword:["",[l.required]],newPassword:["",[l.required,l.minLength(8)]],confirmPassword:["",[l.required]]})}onProfileSubmit(){if(this.profileForm.invalid)return;let{name:t,email:e}=this.profileForm.value;this.authService.updateProfile({name:t,email:e}).subscribe({next:()=>{this.toastService.success("Profile Updated","Your profile has been updated successfully.")},error:()=>{this.toastService.error("Error","Failed to update profile. Please try again.")}})}onPasswordSubmit(){if(this.passwordForm.invalid)return;let{currentPassword:t,newPassword:e,confirmPassword:a}=this.passwordForm.value;if(e!==a){this.toastService.error("Error","Passwords do not match.");return}this.authService.changePassword({currentPassword:t,newPassword:e,confirmPassword:a}).subscribe({next:()=>{this.toastService.success("Password Changed","Your password has been updated successfully."),this.passwordForm.reset()},error:()=>{this.toastService.error("Error","Failed to change password. Please try again.")}})}onThemeChange(t){this.themeService.setTheme(t),this.toastService.success("Theme Updated",`Theme changed to ${t}.`)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-settings"]],decls:29,vars:7,consts:[[1,"page-container"],[1,"flex-1","max-w-4xl","mx-auto","w-full","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-8"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-gray-400"],[1,"card"],[1,"flex","border-b","border-dark-border","mb-6"],[1,"tab",3,"click"],[1,"flex","items-center","gap-2"],[1,"material-icons-outlined","text-lg"],[1,"animate-fade-in"],[1,"text-lg","font-medium","text-white","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","name","type","text","formControlName","name",1,"w-full","px-4","py-3","rounded-lg","bg-dark-input","border","border-dark-border","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"mb-6"],["for","email",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","email","type","email","formControlName","email",1,"w-full","px-4","py-3","rounded-lg","bg-dark-input","border","border-dark-border","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","submit",1,"px-6","py-2.5","rounded-lg","font-medium","text-white","bg-blue-500","hover:bg-blue-600","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],["for","currentPassword",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","currentPassword","type","password","formControlName","currentPassword","placeholder","Enter current password",1,"w-full","px-4","py-3","rounded-lg","bg-dark-input","border","border-dark-border","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","newPassword","type","password","formControlName","newPassword","placeholder","Enter new password",1,"w-full","px-4","py-3","rounded-lg","bg-dark-input","border","border-dark-border","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirm new password",1,"w-full","px-4","py-3","rounded-lg","bg-dark-input","border","border-dark-border","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"space-y-4"],[1,"flex","items-center","gap-4","p-4","rounded-lg","bg-dark-input","border","border-dark-border","cursor-pointer","hover:border-blue-500/50","transition-colors",3,"border-blue-500"],[1,"flex","items-center","gap-4","p-4","rounded-lg","bg-dark-input","border","border-dark-border","cursor-pointer","hover:border-blue-500/50","transition-colors"],["type","radio","name","theme",1,"w-4","h-4","text-blue-500","bg-dark-input","border-dark-border","focus:ring-blue-500","focus:ring-offset-dark-bg",3,"change","value","checked"],[1,"material-icons-outlined","text-gray-400"],[1,"text-white","font-medium"],[1,"text-gray-400","text-sm"]],template:function(e,a){if(e&1&&(r(0,"div",0),c(1,"app-navbar"),r(2,"main",1)(3,"div",2)(4,"h1",3),o(5,"Settings"),i(),r(6,"p",4),o(7,"Manage your account settings and preferences"),i()(),r(8,"div",5)(9,"div",6)(10,"button",7),p("click",function(){return a.activeTab.set("profile")}),r(11,"span",8)(12,"span",9),o(13,"person"),i(),o(14," Profile "),i()(),r(15,"button",7),p("click",function(){return a.activeTab.set("password")}),r(16,"span",8)(17,"span",9),o(18,"lock"),i(),o(19," Password "),i()(),r(20,"button",7),p("click",function(){return a.activeTab.set("appearance")}),r(21,"span",8)(22,"span",9),o(23,"palette"),i(),o(24," Appearance "),i()()(),r(25,"div",10),x(26,R,15,3,"div")(27,Q,19,3,"div")(28,X,6,0,"div"),i()()()()),e&2){let d;s(10),g("tab-active",a.activeTab()==="profile"),s(5),g("tab-active",a.activeTab()==="password"),s(5),g("tab-active",a.activeTab()==="appearance"),s(6),S((d=a.activeTab())==="profile"?26:d==="password"?27:d==="appearance"?28:-1)}},dependencies:[M,q,V,N,I,L,D,G,O],encapsulation:2})};export{Y as SettingsComponent};
