import{b as F,c as d,d as R,e as T,g as k,h as N,i as I,j as q,l as V}from"./chunk-3NQ2KXGN.js";import{A as b,E as s,G as c,H as u,I as m,M as o,N as n,O as f,Q as v,R as g,S as r,U as h,ga as w,ma as S,n as p,na as y,sa as E,ta as P,ua as A,w as C,x as l}from"./chunk-WPWVWWUJ.js";function D(t,a){t&1&&r(0," Full name is required ")}function G(t,a){t&1&&r(0," Name must be at least 2 characters ")}function L(t,a){if(t&1&&(o(0,"p",16),s(1,D,1,0)(2,G,1,0),n()),t&2){let i,e=g();l(),m((i=e.registerForm.get("name"))!=null&&i.hasError("required")?1:(i=e.registerForm.get("name"))!=null&&i.hasError("minlength")?2:-1)}}function j(t,a){t&1&&r(0," Email is required ")}function J(t,a){t&1&&r(0," Please enter a valid email address ")}function B(t,a){if(t&1&&(o(0,"p",16),s(1,j,1,0)(2,J,1,0),n()),t&2){let i,e=g();l(),m((i=e.registerForm.get("email"))!=null&&i.hasError("required")?1:(i=e.registerForm.get("email"))!=null&&i.hasError("email")?2:-1)}}function O(t,a){t&1&&r(0," Password is required ")}function W(t,a){t&1&&r(0," Password must be at least 8 characters ")}function z(t,a){if(t&1&&(o(0,"p",16),s(1,O,1,0)(2,W,1,0),n()),t&2){let i,e=g();l(),m((i=e.registerForm.get("password"))!=null&&i.hasError("required")?1:(i=e.registerForm.get("password"))!=null&&i.hasError("minlength")?2:-1)}}function H(t,a){t&1&&r(0," Please confirm your password ")}function K(t,a){t&1&&r(0," Passwords do not match ")}function Q(t,a){if(t&1&&(o(0,"p",16),s(1,H,1,0)(2,K,1,0),n()),t&2){let i,e=g();l(),m((i=e.registerForm.get("confirmPassword"))!=null&&i.hasError("required")?1:(i=e.registerForm.get("confirmPassword"))!=null&&i.hasError("passwordMismatch")?2:-1)}}function U(t,a){t&1&&(o(0,"span",28)(1,"span",14),r(2,"refresh"),n()(),o(3,"span"),r(4,"Creating account..."),n())}function X(t,a){t&1&&(o(0,"span"),r(1,"Create Account"),n())}var M=class t{authService=p(P);router=p(S);fb=p(q);toastService=p(A);showPassword=C(!1);showConfirmPassword=C(!1);registerForm=this.fb.group({name:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(8)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator});togglePasswordVisibility(){this.showPassword.update(a=>!a)}toggleConfirmPasswordVisibility(){this.showConfirmPassword.update(a=>!a)}isFieldInvalid(a){let i=this.registerForm.get(a);return!!(i&&i.invalid&&(i.dirty||i.touched))}passwordMatchValidator(a){let i=a.get("password"),e=a.get("confirmPassword");return i&&e&&i.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){Object.keys(this.registerForm.controls).forEach(x=>{this.registerForm.get(x)?.markAsTouched()});return}let{name:a,email:i,password:e,confirmPassword:_}=this.registerForm.value;this.authService.register({name:a,email:i,password:e,confirmPassword:_}).subscribe({next:()=>{this.toastService.success("Account Created!","Welcome to Sanrachna Portal."),this.router.navigate(["/dashboard"])},error:x=>{this.toastService.error("Registration Failed",x.message||"Could not create account")}})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=b({type:t,selectors:[["app-register"]],decls:62,vars:19,consts:[[1,"auth-container"],[1,"w-full","max-w-md","animate-fade-in"],[1,"flex","justify-center","mb-6"],[1,"w-16","h-16","rounded-xl","bg-gradient-to-br","from-blue-500","to-purple-500","flex","items-center","justify-center","shadow-glow"],[1,"material-icons-outlined","text-white","text-3xl"],[1,"text-center","mb-8"],[1,"text-2xl","font-semibold","text-white","mb-2"],[1,"text-gray-400"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-300","mb-2"],[1,"relative"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-500"],[1,"material-icons-outlined","text-xl"],["id","name","type","text","formControlName","name","placeholder","John Doe",1,"input-field"],[1,"mt-1","text-sm","text-red-400"],["for","email",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","email","type","email","formControlName","email","placeholder","you@example.com",1,"input-field"],["for","password",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input-field","pr-12",3,"type"],["type","button",1,"absolute","right-4","top-1/2","-translate-y-1/2","text-gray-500","hover:text-gray-300",3,"click"],[1,"mb-6"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input-field","pr-12",3,"type"],["type","submit",1,"btn-primary","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"text-center","text-gray-400","mt-6"],["routerLink","/login",1,"text-blue-400","hover:text-blue-300","font-medium"],[1,"animate-spin"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"person_add"),n()()(),o(6,"div",5)(7,"h1",6),r(8,"Create Account"),n(),o(9,"p",7),r(10,"Join us to access all applications"),n()(),o(11,"div",8)(12,"form",9),v("ngSubmit",function(){return e.onSubmit()}),o(13,"div",10)(14,"label",11),r(15," Full Name "),n(),o(16,"div",12)(17,"span",13)(18,"span",14),r(19,"person"),n()(),f(20,"input",15),n(),s(21,L,3,1,"p",16),n(),o(22,"div",10)(23,"label",17),r(24," Email Address "),n(),o(25,"div",12)(26,"span",13)(27,"span",14),r(28,"mail"),n()(),f(29,"input",18),n(),s(30,B,3,1,"p",16),n(),o(31,"div",10)(32,"label",19),r(33," Password "),n(),o(34,"div",12)(35,"span",13)(36,"span",14),r(37,"lock"),n()(),f(38,"input",20),o(39,"button",21),v("click",function(){return e.togglePasswordVisibility()}),o(40,"span",14),r(41),n()()(),s(42,z,3,1,"p",16),n(),o(43,"div",22)(44,"label",23),r(45," Confirm Password "),n(),o(46,"div",12)(47,"span",13)(48,"span",14),r(49,"lock"),n()(),f(50,"input",24),o(51,"button",21),v("click",function(){return e.toggleConfirmPasswordVisibility()}),o(52,"span",14),r(53),n()()(),s(54,Q,3,1,"p",16),n(),o(55,"button",25),s(56,U,5,0)(57,X,2,0,"span"),n()(),o(58,"p",26),r(59," Already have an account? "),o(60,"a",27),r(61," Sign in "),n()()()()()),i&2&&(l(12),c("formGroup",e.registerForm),l(8),u("border-red-500",e.isFieldInvalid("name")),l(),m(e.isFieldInvalid("name")?21:-1),l(8),u("border-red-500",e.isFieldInvalid("email")),l(),m(e.isFieldInvalid("email")?30:-1),l(8),u("border-red-500",e.isFieldInvalid("password")),c("type",e.showPassword()?"text":"password"),l(3),h(" ",e.showPassword()?"visibility_off":"visibility"," "),l(),m(e.isFieldInvalid("password")?42:-1),l(8),u("border-red-500",e.isFieldInvalid("confirmPassword")),c("type",e.showConfirmPassword()?"text":"password"),l(3),h(" ",e.showConfirmPassword()?"visibility_off":"visibility"," "),l(),m(e.isFieldInvalid("confirmPassword")?54:-1),l(),c("disabled",e.authService.isLoading()),l(),m(e.authService.isLoading()?56:57))},dependencies:[w,E,y,V,k,F,R,T,N,I],encapsulation:2})};export{M as RegisterComponent};
