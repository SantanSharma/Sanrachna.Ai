import{a as N,b as R,c as q,d as j,e as A,f as z,g as G,k as Y,l as U,m as J,n as K}from"./chunk-CH2JMZ2Q.js";import{a as B,b as P,c as O}from"./chunk-ZOUWMX2U.js";import{$ as T,C as F,E as f,H as w,I as M,J as S,K as D,L as i,M as a,N as _,O as v,P as g,Q as u,T as o,V as p,X as m,Y as b,Z as c,ja as L,l as x,la as k,m as E,na as V,oa as I,q as h,r as y,ra as W,s as C,t as H,x as s}from"./chunk-4LOCN6XP.js";var Q=(d,n)=>n.value;function Z(d,n){if(d&1){let e=v();i(0,"button",35),g("click",function(){let l=h(e).$implicit,r=u();return y(r.habitForm.effortLevel=l.value)}),o(1),a()}if(d&2){let e=n.$implicit,t=u();w(t.getEffortButtonClass(e.value)),s(),p(" ",e.label," ")}}function $(d,n){d&1&&(C(),i(0,"svg",37),_(1,"path",38),a())}function tt(d,n){if(d&1){let e=v();i(0,"button",36),g("click",function(){let l=h(e).$implicit,r=u();return y(r.habitForm.color=l.value)}),F(1,$,2,0,":svg:svg",37),a()}if(d&2){let e=n.$implicit,t=u();w(t.getColorButtonClass(e)),f("title",e.label),s(),M(t.habitForm.color===e.value?1:-1)}}function et(d,n){if(d&1){let e=v();i(0,"button",39),g("click",function(){h(e);let l=u();return y(l.onDelete())}),o(1," Delete Habit "),a()}}function it(d,n){d&1&&_(0,"div",31)}var X=class d{habitService=x(O);router=x(V);route=x(k);habitColors=B;effortLevels=P;isEditMode=!1;editingHabitId=null;habitForm={title:"",description:"",startDate:this.getTodayDate(),endDate:this.getDefaultEndDate(),dailyMinutes:20,effortLevel:"Medium",color:"green",reminderTime:""};ngOnInit(){let n=this.route.snapshot.paramMap.get("id");if(n&&n!=="new"){let e=this.habitService.getHabitById(n);e&&(this.isEditMode=!0,this.editingHabitId=n,this.habitForm={title:e.title,description:e.description||"",startDate:e.startDate,endDate:e.endDate,dailyMinutes:e.dailyMinutes,effortLevel:e.effortLevel,color:e.color,reminderTime:e.reminderTime||""})}}getTodayDate(){let n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${l}`}getDefaultEndDate(){let n=new Date;n.setDate(n.getDate()+30);let e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${l}`}calculateDuration(){if(!this.habitForm.startDate||!this.habitForm.endDate)return 0;let n=new Date(this.habitForm.startDate),t=new Date(this.habitForm.endDate).getTime()-n.getTime();return Math.max(0,Math.ceil(t/(1e3*60*60*24))+1)}getEffortButtonClass(n){let e="flex-1 px-2 sm:px-4 py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all duration-200 ";if(this.habitForm.effortLevel===n)switch(n){case"Low":return e+"bg-standby-accent-green text-white";case"Medium":return e+"bg-standby-accent-yellow text-standby-bg";case"High":return e+"bg-standby-accent-orange text-white"}return e+"bg-standby-bg text-standby-text-muted hover:bg-standby-card-hover"}getColorButtonClass(n){let e=`w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl flex items-center justify-center transition-all duration-200 ${n.class} `;return this.habitForm.color===n.value?e+"ring-2 ring-offset-2 ring-offset-standby-card ring-white":e+"opacity-60 hover:opacity-100"}isFormValid(){return!!(this.habitForm.title.trim()&&this.habitForm.startDate&&this.habitForm.endDate&&this.habitForm.dailyMinutes>0&&this.habitForm.effortLevel&&this.calculateDuration()>0)}onSubmit(){if(!this.isFormValid())return;let n={title:this.habitForm.title.trim(),description:this.habitForm.description.trim()||void 0,startDate:this.habitForm.startDate,endDate:this.habitForm.endDate,dailyMinutes:this.habitForm.dailyMinutes,effortLevel:this.habitForm.effortLevel,color:this.habitForm.color,reminderTime:this.habitForm.reminderTime||void 0};this.isEditMode&&this.editingHabitId?this.habitService.updateHabit(this.editingHabitId,n):this.habitService.createHabit(n),this.router.navigate(["/habits"])}onDelete(){this.editingHabitId&&(this.habitService.deleteHabit(this.editingHabitId),this.router.navigate(["/habits"]))}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=E({type:d,selectors:[["app-habit-form"]],standalone:!0,features:[T],decls:84,vars:13,consts:[[1,"habit-form-page","min-h-screen","bg-standby-bg"],[1,"max-w-2xl","mx-auto","px-3","sm:px-6","lg:px-8","py-4","sm:py-8"],[1,"mb-6","sm:mb-8"],["routerLink","/habits",1,"inline-flex","items-center","gap-1.5","sm:gap-2","text-sm","sm:text-base","text-standby-text-muted","hover:text-standby-text","transition-colors","mb-3","sm:mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","sm:h-5","sm:w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","sm:text-3xl","font-bold","text-standby-text"],[1,"text-standby-text-muted","mt-0.5","sm:mt-1","text-sm","sm:text-base"],[1,"space-y-4","sm:space-y-6",3,"ngSubmit"],[1,"bg-standby-card","rounded-xl","sm:rounded-2xl","p-4","sm:p-6","border","border-standby-border"],[1,"block","text-xs","sm:text-sm","font-medium","text-standby-text","mb-1.5","sm:mb-2"],[1,"text-standby-accent-red"],["type","text","name","title","placeholder","e.g., Morning Meditation","required","",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-3","sm:px-4","py-2.5","sm:py-3","text-sm","sm:text-base","text-standby-text","placeholder-standby-text-muted","focus:outline-none","focus:border-standby-accent-blue","transition-colors",3,"ngModelChange","ngModel"],[1,"text-standby-text-muted"],["name","description","placeholder","Why is this habit important to you?","rows","3",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-3","sm:px-4","py-2.5","sm:py-3","text-sm","sm:text-base","text-standby-text","placeholder-standby-text-muted","focus:outline-none","focus:border-standby-accent-blue","transition-colors","resize-none",3,"ngModelChange","ngModel"],[1,"text-base","sm:text-lg","font-medium","text-standby-text","mb-3","sm:mb-4"],[1,"grid","grid-cols-2","gap-3","sm:gap-4"],["type","date","name","startDate","required","",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-2","sm:px-4","py-2.5","sm:py-3","text-xs","sm:text-base","text-standby-text","focus:outline-none","focus:border-standby-accent-blue","transition-colors",3,"ngModelChange","ngModel"],["type","date","name","endDate","required","",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-2","sm:px-4","py-2.5","sm:py-3","text-xs","sm:text-base","text-standby-text","focus:outline-none","focus:border-standby-accent-blue","transition-colors",3,"ngModelChange","ngModel","min"],[1,"text-xs","sm:text-sm","text-standby-text-muted","mt-2","sm:mt-3"],[1,"grid","grid-cols-1","gap-4"],["type","number","name","dailyMinutes","min","1","max","480","placeholder","20","required","",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-3","sm:px-4","py-2.5","sm:py-3","text-sm","sm:text-base","text-standby-text","focus:outline-none","focus:border-standby-accent-blue","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","gap-2"],["type","button",3,"class"],[1,"mb-4","sm:mb-6"],[1,"block","text-xs","sm:text-sm","font-medium","text-standby-text","mb-2","sm:mb-3"],[1,"flex","gap-2","sm:gap-3","flex-wrap"],["type","button",3,"class","title"],["type","time","name","reminderTime",1,"w-full","bg-standby-bg","border","border-standby-border","rounded-lg","sm:rounded-xl","px-3","sm:px-4","py-2.5","sm:py-3","text-sm","sm:text-base","text-standby-text","focus:outline-none","focus:border-standby-accent-blue","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","flex-col-reverse","sm:flex-row","sm:items-center","sm:justify-between","gap-3","sm:gap-0","pt-3","sm:pt-4"],["type","button",1,"px-4","sm:px-5","py-2.5","sm:py-3","rounded-lg","sm:rounded-xl","bg-standby-accent-red/20","text-standby-accent-red","hover:bg-standby-accent-red/30","transition-colors","text-sm","sm:text-base","text-center"],[1,"hidden","sm:block"],[1,"flex","gap-2","sm:gap-3"],["routerLink","/habits",1,"flex-1","sm:flex-none","px-4","sm:px-5","py-2.5","sm:py-3","rounded-lg","sm:rounded-xl","bg-standby-card-hover","text-standby-text","hover:bg-standby-border","transition-colors","text-sm","sm:text-base","text-center"],["type","submit",1,"flex-1","sm:flex-none","px-4","sm:px-6","py-2.5","sm:py-3","rounded-lg","sm:rounded-xl","bg-standby-accent-blue","text-white","hover:bg-standby-accent-blue/80","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","font-medium","text-sm","sm:text-base",3,"disabled"],["type","button",3,"click"],["type","button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3","w-3","sm:h-4","sm:w-4","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["type","button",1,"px-4","sm:px-5","py-2.5","sm:py-3","rounded-lg","sm:rounded-xl","bg-standby-accent-red/20","text-standby-accent-red","hover:bg-standby-accent-red/30","transition-colors","text-sm","sm:text-base","text-center",3,"click"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),C(),i(4,"svg",4),_(5,"path",5),a(),o(6," Back "),a(),H(),i(7,"h1",6),o(8),a(),i(9,"p",7),o(10),a()(),i(11,"form",8),g("ngSubmit",function(){return t.onSubmit()}),i(12,"div",9)(13,"label",10),o(14," Habit Title "),i(15,"span",11),o(16,"*"),a()(),i(17,"input",12),c("ngModelChange",function(r){return b(t.habitForm.title,r)||(t.habitForm.title=r),r}),a()(),i(18,"div",9)(19,"label",10),o(20," Description "),i(21,"span",13),o(22,"(optional)"),a()(),i(23,"textarea",14),c("ngModelChange",function(r){return b(t.habitForm.description,r)||(t.habitForm.description=r),r}),o(24,"            "),a()(),i(25,"div",9)(26,"h3",15),o(27,"Duration"),a(),i(28,"div",16)(29,"div")(30,"label",10),o(31," Start "),i(32,"span",11),o(33,"*"),a()(),i(34,"input",17),c("ngModelChange",function(r){return b(t.habitForm.startDate,r)||(t.habitForm.startDate=r),r}),a()(),i(35,"div")(36,"label",10),o(37," End "),i(38,"span",11),o(39,"*"),a()(),i(40,"input",18),c("ngModelChange",function(r){return b(t.habitForm.endDate,r)||(t.habitForm.endDate=r),r}),a()()(),i(41,"p",19),o(42),a()(),i(43,"div",9)(44,"h3",15),o(45,"Commitment"),a(),i(46,"div",20)(47,"div")(48,"label",10),o(49," Daily Time (mins) "),i(50,"span",11),o(51,"*"),a()(),i(52,"input",21),c("ngModelChange",function(r){return b(t.habitForm.dailyMinutes,r)||(t.habitForm.dailyMinutes=r),r}),a()(),i(53,"div")(54,"label",10),o(55," Effort Level "),i(56,"span",11),o(57,"*"),a()(),i(58,"div",22),S(59,Z,2,3,"button",23,Q),a()()()(),i(61,"div",9)(62,"h3",15),o(63,"Personalization"),a(),i(64,"div",24)(65,"label",25),o(66," Color Tag "),a(),i(67,"div",26),S(68,tt,2,4,"button",27,Q),a()(),i(70,"div")(71,"label",10),o(72," Reminder Time "),i(73,"span",13),o(74,"(optional)"),a()(),i(75,"input",28),c("ngModelChange",function(r){return b(t.habitForm.reminderTime,r)||(t.habitForm.reminderTime=r),r}),a()()(),i(76,"div",29),F(77,et,2,0,"button",30)(78,it,1,0,"div",31),i(79,"div",32)(80,"a",33),o(81," Cancel "),a(),i(82,"button",34),o(83),a()()()()()()),e&2&&(s(8),p(" ",t.isEditMode?"Edit Habit":"New Habit"," "),s(2),p(" ",t.isEditMode?"Update your habit details":"Start building a new positive habit"," "),s(7),m("ngModel",t.habitForm.title),s(6),m("ngModel",t.habitForm.description),s(11),m("ngModel",t.habitForm.startDate),s(6),m("ngModel",t.habitForm.endDate),f("min",t.habitForm.startDate),s(2),p(" Duration: ",t.calculateDuration()," days "),s(10),m("ngModel",t.habitForm.dailyMinutes),s(7),D(t.effortLevels),s(9),D(t.habitColors),s(7),m("ngModel",t.habitForm.reminderTime),s(2),M(t.isEditMode?77:78),s(5),f("disabled",!t.isFormValid()),s(),p(" ",t.isEditMode?"Save":"Create"," "))},dependencies:[L,W,I,K,z,N,G,R,q,J,U,Y,A,j],styles:[".habit-form-page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(.7)}"]})};export{X as HabitFormComponent};
